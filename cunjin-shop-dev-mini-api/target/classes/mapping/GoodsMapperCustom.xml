<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yeykai.mapper.GoodsMapperCustom" >
  <resultMap id="BaseResultMap" type="com.yeykai.pojo.vo.GoodsVO" >
    <!--
      WARNING - @mbg.generated
    -->
    <id column="id" property="id" jdbcType="VARCHAR" />
    <result column="seller_id" property="sellerId" jdbcType="VARCHAR" />
    <result column="goods_name" property="goodsName" jdbcType="VARCHAR" />
    <result column="price" property="price" jdbcType="DOUBLE" />
    <result column="like_counts" property="likeCounts" jdbcType="INTEGER" />
    <result column="seller_phone" property="sellerPhone" jdbcType="VARCHAR" />
    <result column="address" property="address" jdbcType="VARCHAR" />
    <result column="goods_num" property="goodsNum" jdbcType="INTEGER" />
    <result column="goods_desc" property="goodsDesc" jdbcType="VARCHAR" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="img" property="goodsImg" jdbcType="VARCHAR" />
    <result column="nickname" property="nickName" jdbcType="VARCHAR" />
    <result column="avatar_url" property="avatar_url" jdbcType="VARCHAR" />
  </resultMap>
  
  <select id="queryAllGoods" resultMap="BaseResultMap" parameterType="String">
  		
	select g.*,i.img as img,u.nickname as nickname,u.avatar_url as avatar_url from goods g 
	left join (select * from goods_img group by goods_id) i on g.id = i.goods_id
	left join users u on g.seller_id = u.openid
  		
  </select>
</mapper>